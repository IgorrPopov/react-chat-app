{"version":3,"sources":["components/ChatUser.js","components/ChatUsersSortingForm.js","components/ChatUsersList.js","components/ChatMessage.js","components/ChatMessagesList.js","components/ChatForm.js","components/ChatBoxHeader.js","components/ChatBox.js","components/ChatWelcomeMessage.js","components/ChatPage.js"],"names":["ChatUser","props","user","name","age","gender","avatar","country","handleCompanionChange","userMessages","className","onClick","document","getElementById","click","src","alt","find","msg","isSeen","reduce","count","defaultState","isMale","isFemale","minAge","maxAge","ChatUsersSortingForm","state","handleNameChange","bind","handleMalesCheckboxChange","handleFemalesCheckboxChange","handleMaxAgeChange","handleMinAgeChange","handleFilterReset","e","target","value","match","this","setState","handleUsersFilter","preventDefault","onSubmit","htmlFor","id","type","onChange","autoComplete","checked","React","Component","ChatUsersList","toLowerCase","users","filter","filterUser","map","index","key","messages","ChatMessage","message","text","time","user_id","handleMessageSeen","whichSide","isVisible","ChatMessagesList","$chatMessagesWrapper","$","undefined","length","scrollTop","scrollHeight","ChatForm","input","error","handleInputChange","handleFormSubmit","trim","handleMessageSend","ChatBoxHeader","companion","ChatBox","hasLeft","ChatWelcomeMessage","replace","handleClick","ChatPage","socket","fetch","method","headers","body","JSON","stringify","status","console","log","location","checkIfUserWasDisconnect","history","push","io","emit","on","connectedUsers","newUser","companion_id","Date","toLocaleString","hour","minute","second","hour12","companionMessagesArray","newCompanion","addMessage","companionMessages","message_index","arrLength","role","data-toggle","href","aria-controls","aria-selected","aria-labelledby"],"mappings":"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","file":"static/js/4.e34f56f4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst ChatUser = (props) => {\r\n  const { name, age, gender, avatar, country } = props.user;\r\n  const { handleCompanionChange, userMessages = [] } = props;\r\n\r\n  const handleClick = () => {\r\n    handleCompanionChange(props.user);\r\n    document.getElementById('nav-chat-tab').click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"row p-1 chat-user-wrapper\" onClick={handleClick}>\r\n      <div className=\"col-12 px-0 d-flex flex-row justify-content-sm-start font-weight-bold\">\r\n        <img src={avatar} alt={avatar} className=\"avatar-img ml-2\" />\r\n        <span className=\"ml-2 user-name-title align-self-center\">\r\n          {name}\r\n          <img\r\n            src={`/images/gender_icons/${gender}.png`}\r\n            alt={gender}\r\n            className=\"small-gender-img ml-1\"\r\n          />\r\n        </span>\r\n        {userMessages.find((msg) => !msg.isSeen) ? (\r\n          <div className=\"unseen-messages-indicator\">\r\n            {userMessages.reduce(\r\n              (count, msg) => (!msg.isSeen ? ++count : count),\r\n              0\r\n            )}\r\n          </div>\r\n        ) : null}\r\n        <span className=\"ml-2 text-muted user-age-and-flag-title align-self-center\">\r\n          <span className=\"user-age-title\">{age} years old </span>\r\n          <img\r\n            src={`/images/flags/${country}.svg`}\r\n            alt={country}\r\n            className=\"small-flag-img ml-1\"\r\n          />\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatUser;\r\n","import React from 'react';\r\n\r\nconst defaultState = {\r\n  name: '',\r\n  isMale: true,\r\n  isFemale: true,\r\n  minAge: 1,\r\n  maxAge: 99,\r\n};\r\n\r\nclass ChatUsersSortingForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = defaultState;\r\n\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.handleMalesCheckboxChange = this.handleMalesCheckboxChange.bind(this);\r\n    this.handleFemalesCheckboxChange = this.handleFemalesCheckboxChange.bind(\r\n      this\r\n    );\r\n    this.handleMaxAgeChange = this.handleMaxAgeChange.bind(this);\r\n    this.handleMinAgeChange = this.handleMinAgeChange.bind(this);\r\n    this.handleFilterReset = this.handleFilterReset.bind(this);\r\n  }\r\n\r\n  handleNameChange(e) {\r\n    const name = e.target.value;\r\n\r\n    if (!name || name.match(/^[a-zA-Z0-9 ]{1,15}$/)) {\r\n      this.setState({ name }, () => this.props.handleUsersFilter(this.state));\r\n    }\r\n  }\r\n\r\n  handleMalesCheckboxChange() {\r\n    this.setState({ isMale: !this.state.isMale }, () =>\r\n      this.props.handleUsersFilter(this.state)\r\n    );\r\n  }\r\n\r\n  handleFemalesCheckboxChange() {\r\n    this.setState({ isFemale: !this.state.isFemale }, () =>\r\n      this.props.handleUsersFilter(this.state)\r\n    );\r\n  }\r\n\r\n  handleMinAgeChange(e) {\r\n    const minAge = e.target.value;\r\n\r\n    if (!minAge || (minAge <= 99 && minAge >= 1)) {\r\n      this.setState({ minAge }, () => this.props.handleUsersFilter(this.state));\r\n    }\r\n  }\r\n\r\n  handleMaxAgeChange(e) {\r\n    const maxAge = e.target.value;\r\n\r\n    if (!maxAge || (maxAge <= 99 && maxAge >= 1)) {\r\n      this.setState({ maxAge }, () => this.props.handleUsersFilter(this.state));\r\n    }\r\n  }\r\n\r\n  handleFilterReset(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ ...defaultState }, () =>\r\n      this.props.handleUsersFilter(this.state)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"form-inline chat-users-sort-form\"\r\n        onSubmit={this.handleFilterReset}\r\n      >\r\n        <div className=\"d-flex mt-1\">\r\n          <label htmlFor=\"name\" className=\"font-smaller\">\r\n            Name:\r\n          </label>\r\n          <input\r\n            value={this.state.name}\r\n            id=\"name\"\r\n            type=\"text\"\r\n            className=\"form-control-sm filter-text-input ml-2\"\r\n            onChange={this.handleNameChange}\r\n            autoComplete=\"off\"\r\n          />\r\n        </div>\r\n        <div className=\"d-flex chat-users-filter-checkbox\">\r\n          <div className=\"from-check\">\r\n            <label className=\"form-check-label font-smaller\">\r\n              Males:\r\n              <input\r\n                className=\"form-check-input mx-2 my-0\"\r\n                type=\"checkbox\"\r\n                checked={this.state.isMale}\r\n                onChange={this.handleMalesCheckboxChange}\r\n              />\r\n            </label>\r\n          </div>\r\n          <div className=\"from-check females-form-check\">\r\n            <label className=\"form-check-label font-smaller\">\r\n              Females:\r\n              <input\r\n                className=\"form-check-input mx-2 my-0\"\r\n                type=\"checkbox\"\r\n                checked={this.state.isFemale}\r\n                onChange={this.handleFemalesCheckboxChange}\r\n              />\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex\">\r\n          <div className=\"d-flex\">\r\n            <label htmlFor=\"min-age\" className=\"font-smaller\">\r\n              {' '}\r\n              Min age:{' '}\r\n            </label>\r\n            <input\r\n              value={this.state.minAge}\r\n              id=\"min-age\"\r\n              type=\"number\"\r\n              className=\"form-control-sm filter-number-input mx-2\"\r\n              onChange={this.handleMinAgeChange}\r\n            />\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            <label htmlFor=\"max-age\"> Max age: </label>\r\n            <input\r\n              value={this.state.maxAge}\r\n              id=\"max-age\"\r\n              type=\"number\"\r\n              className=\"form-control-sm filter-number-input mx-2\"\r\n              onChange={this.handleMaxAgeChange}\r\n            />\r\n          </div>\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-sm btn-info font-weight-bold\">\r\n          RESET\r\n        </button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatUsersSortingForm;\r\n","import React from 'react';\r\nimport ChatUser from './ChatUser';\r\nimport ChatUsersSortingForm from './ChatUsersSortingForm';\r\n\r\nclass ChatUsersList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      isMale: true,\r\n      isFemale: true,\r\n      minAge: 1,\r\n      maxAge: 99,\r\n    };\r\n\r\n    this.handleUsersFilter = this.handleUsersFilter.bind(this);\r\n  }\r\n\r\n  filterUser(user) {\r\n    const { name, isFemale, isMale, minAge, maxAge } = this.state;\r\n\r\n    if (\r\n      name !== '' &&\r\n      user.name.toLowerCase().match(name.toLowerCase()) === null\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    if (user.gender === 'male' && !isMale) {\r\n      return false;\r\n    }\r\n\r\n    if (user.gender === 'female' && !isFemale) {\r\n      return false;\r\n    }\r\n\r\n    if (user.age > maxAge || user.age < minAge) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  handleUsersFilter(state) {\r\n    this.setState({ ...state });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-users-sorting\">\r\n        <div className=\"chat-users-list-wrapper\">\r\n          {this.props.users.filter(this.filterUser, this).map((user, index) => {\r\n            return (\r\n              <ChatUser\r\n                key={index}\r\n                user={user}\r\n                handleCompanionChange={this.props.handleCompanionChange}\r\n                userMessages={this.props.messages[user.id] ?? []}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <ChatUsersSortingForm handleUsersFilter={this.handleUsersFilter} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatUsersList;\r\n","import React from 'react';\r\nimport VisibilitySensor from 'react-visibility-sensor';\r\n\r\nclass ChatMessage extends React.Component {\r\n  render() {\r\n    const { text, time, user_id, isSeen } = this.props.message;\r\n    const { user, handleMessageSeen, index } = this.props;\r\n    const isSameUser = user.id === user_id;\r\n    const whichSide = isSameUser ? 'right' : 'left';\r\n\r\n    return (\r\n      <VisibilitySensor\r\n        onChange={(isVisible) => {\r\n          if (isVisible && !isSeen) {\r\n            handleMessageSeen(index);\r\n          }\r\n        }}\r\n      >\r\n        <div className={`message-${whichSide}`}>\r\n          {text}\r\n          <div className={`message-time-${whichSide}`}>{time}</div>\r\n        </div>\r\n      </VisibilitySensor>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatMessage;\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport ChatMessage from './ChatMessage';\r\n\r\nclass ChatMessagesList extends React.Component {\r\n  componentDidUpdate() {\r\n    const $chatMessagesWrapper = $('.chat-messages-wrapper');\r\n\r\n    if ($chatMessagesWrapper !== undefined && $chatMessagesWrapper.length > 0) {\r\n      $chatMessagesWrapper.scrollTop($chatMessagesWrapper[0].scrollHeight);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"p-3 chat-messages-wrapper\">\r\n        {(this.props.messages || []).map((message, index) => (\r\n          <ChatMessage\r\n            user={this.props.user}\r\n            handleMessageSeen={this.props.handleMessageSeen}\r\n            key={index}\r\n            index={index}\r\n            message={message}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatMessagesList;\r\n","import React from 'react';\r\n\r\nconst MESSAGE_LENGTH = 500;\r\n\r\nclass ChatForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      input: '',\r\n      error: '',\r\n    };\r\n\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n  }\r\n\r\n  handleInputChange(e) {\r\n    const input = e.target.value;\r\n\r\n    if (!input || typeof input === 'string') {\r\n      if (input.length < MESSAGE_LENGTH) {\r\n        return this.setState({ input, error: '' });\r\n      }\r\n\r\n      this.setState({\r\n        error: `The message must be less than ${MESSAGE_LENGTH} characters`,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleFormSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    let input = this.state.input;\r\n    input = typeof input === 'string' ? input.trim() : '';\r\n\r\n    if (input === '') {\r\n      return this.setState({ error: 'Type something' });\r\n    }\r\n\r\n    if (input.length < MESSAGE_LENGTH) {\r\n      this.props.handleMessageSend(input);\r\n      this.setState({ input: '', error: '' });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"input-group position-absolute chat-form\"\r\n        onSubmit={this.handleFormSubmit}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={this.state.input}\r\n          onChange={this.handleInputChange}\r\n        />\r\n        <div className=\"input-group-append\">\r\n          <button className=\"btn btn-info char-form-button\">SEND</button>\r\n        </div>\r\n        {this.state.error ? (\r\n          <div className=\"error-message error-message--chat-form\">\r\n            {this.state.error}\r\n          </div>\r\n        ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatForm;\r\n","import React from 'react';\r\n\r\nconst ChatBoxHeader = ({ companion } = {}) => {\r\n  const { name, age, gender, avatar, country } = companion;\r\n  return (\r\n    <div className=\"row p-1 chat-user-wrapper__header chat-user-wrapper__header\">\r\n      <div className=\"col-12 d-flex flex-row justify-content-sm-start font-weight-bold\">\r\n        <img src={avatar} alt={avatar} className=\"avatar-img ml-2\" />\r\n        <span className=\"ml-2 user-name-title align-self-center\">\r\n          {name}\r\n          <img\r\n            src={`/images/gender_icons/${gender}.png`}\r\n            alt={gender}\r\n            className=\"small-gender-img ml-1\"\r\n          />\r\n        </span>\r\n        <span className=\"ml-2 text-muted user-age-and-flag-title align-self-center\">\r\n          <span className=\"user-age-title\">{age} years old</span>\r\n          <img\r\n            src={`/images/flags/${country}.svg`}\r\n            alt={country}\r\n            className=\"small-flag-img ml-1\"\r\n          />\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBoxHeader;\r\n","import React from 'react';\r\nimport ChatMessagesList from './ChatMessagesList';\r\nimport ChatForm from './ChatForm';\r\nimport ChatBoxHeader from './ChatBoxHeader';\r\n\r\nconst ChatBox = ({\r\n  user,\r\n  companion,\r\n  messages,\r\n  handleMessageSeen,\r\n  handleMessageSend,\r\n} = {}) => (\r\n  <div className=\"d-flex flex-column position-relative chat-box-wrapper\">\r\n    <ChatBoxHeader companion={companion} />\r\n    {!companion.hasLeft || (\r\n      <div className=\"user-left-message\">\r\n        {`${companion.name} has left the chat`}\r\n      </div>\r\n    )}\r\n    {!companion.hasLeft === undefined || (\r\n      <>\r\n        <ChatMessagesList\r\n          user={user}\r\n          messages={messages}\r\n          handleMessageSeen={handleMessageSeen}\r\n        />\r\n        <ChatForm handleMessageSend={handleMessageSend} />\r\n      </>\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default ChatBox;\r\n","import React from 'react';\r\n\r\nconst ChatWelcomeMessage = ({ user } = {}) => {\r\n  let { name, avatar, age, gender, country } = user;\r\n\r\n  if (country) {\r\n    country = country.replace(/_/g, ' ');\r\n  }\r\n\r\n  const handleClick = () => {\r\n    document.getElementById('nav-users-tab').click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"message-welcome d-flex flex-column  align-content-center text-center\">\r\n      <h3>Hello!!!</h3>\r\n      <div>\r\n        <img src={avatar} alt=\"avatar\"></img>\r\n      </div>\r\n      <h4 className=\"font-weight-bold\">{`${name}`}</h4>\r\n      <h5>{`You're a ${age} years old ${gender} from ${country}`}</h5>\r\n      <p>Now just find someone to talk!</p>\r\n      <button\r\n        className=\"btn btn-info btn-lg w-75 mx-auto font-weight-bold\"\r\n        onClick={handleClick}\r\n      >\r\n        FIND\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatWelcomeMessage;\r\n","import React from 'react';\r\nimport io from 'socket.io-client';\r\nimport ChatUsersList from './ChatUsersList';\r\nimport ChatBox from './ChatBox';\r\nimport ChatWelcomeMessage from './ChatWelcomeMessage';\r\n\r\nclass ChatPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      user: false,\r\n      companion: false,\r\n      socket: false,\r\n      users: [],\r\n      messages: {},\r\n    };\r\n\r\n    this.handleCompanionChange = this.handleCompanionChange.bind(this);\r\n    this.handleMessageSend = this.handleMessageSend.bind(this);\r\n    this.handleMessageSeen = this.handleMessageSeen.bind(this);\r\n  }\r\n\r\n  async checkIfUserWasDisconnect(user) {\r\n    try {\r\n      const response = await fetch('/check-user', {\r\n        method: 'post',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user),\r\n      });\r\n\r\n      if (response.status !== 200) {\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.log('Server error occured');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const isStateSent = this.props.location.state !== undefined;\r\n    const user = isStateSent ? this.props.location.state.user : false;\r\n\r\n    console.log('user: ', user);\r\n\r\n    if (!user || this.checkIfUserWasDisconnect(user)) {\r\n      this.props.history.push('/', { user: false });\r\n    } else {\r\n      this.setState(\r\n        {\r\n          user,\r\n          socket: io('http://localhost:5000'),\r\n        },\r\n        () => {\r\n          const socket = this.state.socket;\r\n\r\n          socket.emit('join', this.state.user.id);\r\n          socket.emit('load_connected_users', this.state.user.id);\r\n\r\n          socket.on('load_connected_users', (connectedUsers) => {\r\n            this.setState({\r\n              users: [...this.state.users, ...connectedUsers],\r\n            });\r\n          });\r\n\r\n          socket.on('new_user_connected', (newUser) => {\r\n            this.setState({\r\n              users: [...this.state.users, newUser],\r\n            });\r\n          });\r\n\r\n          socket.on('user_disconnected', (user_id) => {\r\n            const users = this.state.users.filter(\r\n              (user) => user.id !== user_id\r\n            );\r\n\r\n            const messages = this.state.messages;\r\n            delete messages[user_id];\r\n\r\n            const companion = this.state.companion || {};\r\n            companion.hasLeft = true;\r\n\r\n            this.setState({ users, messages, companion });\r\n          });\r\n\r\n          socket.on('message', ({ companion_id, text } = {}) => {\r\n            const message = {\r\n              user_id: companion_id,\r\n              text,\r\n              time: new Date().toLocaleString('en-US', {\r\n                hour: 'numeric',\r\n                minute: 'numeric',\r\n                second: 'numeric',\r\n                hour12: true,\r\n              }),\r\n              isSeen: false,\r\n            };\r\n\r\n            const companionMessagesArray =\r\n              this.state.messages[companion_id] || [];\r\n            companionMessagesArray.push(message);\r\n\r\n            this.setState({\r\n              messages: {\r\n                ...this.state.messages,\r\n                [companion_id]: companionMessagesArray,\r\n              },\r\n            });\r\n          });\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  handleCompanionChange(newCompanion) {\r\n    if (this.state.companion.id !== newCompanion.id) {\r\n      this.setState({\r\n        companion: newCompanion,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleMessageSend(text) {\r\n    const message = {\r\n      user_id: this.state.user.id,\r\n      companion_id: this.state.companion.id,\r\n      text,\r\n    };\r\n\r\n    this.state.socket.emit('message', message);\r\n\r\n    this.addMessage(text);\r\n  }\r\n\r\n  addMessage(text) {\r\n    const message = {\r\n      isSeen: false,\r\n      user_id: this.state.user.id,\r\n      text,\r\n      time: new Date().toLocaleString('en-US', {\r\n        hour: 'numeric',\r\n        minute: 'numeric',\r\n        second: 'numeric',\r\n        hour12: true,\r\n      }),\r\n    };\r\n\r\n    const companionMessages =\r\n      this.state.messages[this.state.companion.id] || [];\r\n    companionMessages.push(message);\r\n\r\n    this.setState({\r\n      messages: {\r\n        ...this.state.messages,\r\n        [this.state.companion.id]: companionMessages,\r\n      },\r\n    });\r\n  }\r\n\r\n  handleMessageSeen(message_index) {\r\n    const companionMessages =\r\n      this.state.messages[this.state.companion.id] || [];\r\n    const arrLength = companionMessages.length;\r\n\r\n    if (arrLength > 0 && message_index >= 0 && message_index + 1 <= arrLength) {\r\n      companionMessages[message_index].isSeen = true;\r\n\r\n      this.setState({\r\n        messages: {\r\n          ...this.state.messages,\r\n          [this.state.companion.id]: companionMessages,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"chatPageWrapper\">\r\n        <div className=\"dark-overlay\">\r\n          <div className=\"container mt-3 w-100\">\r\n            <nav>\r\n              <div className=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                <a\r\n                  className=\"nav-item nav-link\"\r\n                  id=\"nav-history-tab\"\r\n                  data-toggle=\"tab\"\r\n                  href=\"#nav-history\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"nav-history\"\r\n                  aria-selected=\"true\"\r\n                >\r\n                  History\r\n                </a>\r\n                <a\r\n                  className=\"nav-item nav-link active\"\r\n                  id=\"nav-chat-tab\"\r\n                  data-toggle=\"tab\"\r\n                  href=\"#nav-chat\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"nav-chat\"\r\n                  aria-selected=\"false\"\r\n                >\r\n                  Chat\r\n                </a>\r\n                <a\r\n                  className=\"nav-item nav-link\"\r\n                  id=\"nav-users-tab\"\r\n                  data-toggle=\"tab\"\r\n                  href=\"#nav-users\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"nav-users\"\r\n                  aria-selected=\"false\"\r\n                >\r\n                  Users\r\n                </a>\r\n              </div>\r\n            </nav>\r\n\r\n            <div className=\"tab-content w-100\" id=\"nav-tabContent\">\r\n              <div\r\n                className=\"tab-pane fade  w-100\"\r\n                id=\"nav-history\"\r\n                role=\"tabpanel\"\r\n                aria-labelledby=\"nav-history-tab\"\r\n              >\r\n                <ChatUsersList\r\n                  users={this.state.users.filter(\r\n                    (user) => this.state.messages[user.id] !== undefined\r\n                  )}\r\n                  handleCompanionChange={this.handleCompanionChange}\r\n                  messages={this.state.messages}\r\n                />\r\n              </div>\r\n              <div\r\n                className=\"tab-pane fade show active\"\r\n                id=\"nav-chat\"\r\n                role=\"tabpanel\"\r\n                aria-labelledby=\"nav-chat-tab\"\r\n              >\r\n                {this.state.companion ? (\r\n                  <ChatBox\r\n                    companion={this.state.companion}\r\n                    user={this.state.user}\r\n                    handleMessageSend={this.handleMessageSend}\r\n                    handleMessageSeen={this.handleMessageSeen}\r\n                    messages={this.state.messages[this.state.companion.id]}\r\n                  />\r\n                ) : (\r\n                  <ChatWelcomeMessage user={this.state.user} />\r\n                )}\r\n              </div>\r\n              <div\r\n                className=\"tab-pane fade\"\r\n                id=\"nav-users\"\r\n                role=\"tabpanel\"\r\n                aria-labelledby=\"nav-users-tab\"\r\n              >\r\n                <ChatUsersList\r\n                  users={this.state.users}\r\n                  handleCompanionChange={this.handleCompanionChange}\r\n                  messages={this.state.messages}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatPage;\r\n"],"sourceRoot":""}